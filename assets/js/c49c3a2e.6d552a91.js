"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9350],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,u=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=o,k=d["".concat(u,".").concat(m)]||d[m]||c[m]||r;return n?a.createElement(k,i(i({ref:t},p),{},{components:n})):a.createElement(k,i({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9938:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return s},toc:function(){return p},default:function(){return d}});var a=n(3117),o=n(102),r=(n(7294),n(3905)),i=["components"],l={"date created":"2021-11-27 21:37","date updated":"2021-11-27 21:47",sidebar_position:1},u="React Router V6",s={unversionedId:"React Router/React Router V6",id:"React Router/React Router V6",isDocsHomePage:!1,title:"React Router V6",description:"Before Start",source:"@site/docs/React Router/React Router V6.md",sourceDirName:"React Router",slug:"/React Router/React Router V6",permalink:"/docusauras-blog-client/docs/React Router/React Router V6",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/React Router/React Router V6.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{"date created":"2021-11-27 21:37","date updated":"2021-11-27 21:47",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"react-native-errors",permalink:"/docusauras-blog-client/docs/React Native/react-native-errors"},next:{title:"React Spring",permalink:"/docusauras-blog-client/docs/React Spring/react-spring"}},p=[{value:"Before Start",id:"before-start",children:[],level:2},{value:"Getting Start",id:"getting-start",children:[{value:"Routes &amp; Switch",id:"routes--switch",children:[],level:3},{value:"Relative Routes and Links",id:"relative-routes-and-links",children:[],level:3},{value:"Advantages Of Route Element",id:"advantages-of-route-element",children:[],level:3},{value:"Note on <code>&lt;Route Path&gt;</code> Patterns",id:"note-on-route-path-patterns",children:[],level:3},{value:"Note on Link to Values",id:"note-on-link-to-values",children:[],level:3},{value:"Use <code>useRoutes</code> Instead of <code>react-router-config</code>",id:"use-useroutes-instead-of-react-router-config",children:[],level:3},{value:"Use <code>useNavigate</code> Instead of <code>useHistory</code>",id:"use-usenavigate-instead-of-usehistory",children:[],level:3},{value:"Replace <code>useRouteMatch</code> with <code>useMatch</code>",id:"replace-useroutematch-with-usematch",children:[],level:3}],level:2},{value:"END",id:"end",children:[],level:2}],c={toc:p};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"react-router-v6"},"React Router V6"),(0,r.kt)("h2",{id:"before-start"},"Before Start"),(0,r.kt)("p",null,"\u4eca\u5929\u662f 2021 \u5e74 11 \u6708 27 \u65e5,\u4e00\u4e2a\u795e\u5947\u7684\u65e5\u5b50.\u672c\u6765\u4eca\u5929\u4e3a\u4e86\u5728 React Native \u4e2d\u4f7f\u7528 Echarts,\u9700\u8981\u989d\u5916\u7528 React \u5199\u4e00\u4e2a\u7f51\u9875\u90e8\u7f72\u5230\u670d\u52a1\u5668,\u53c8\u8003\u8651\u5230 App \u65e0\u6cd5\u7ed9\u7f51\u9875\u4f20\u53c2,\u53ea\u80fd\u91c7\u7528\u8def\u7531\u4f20\u53c2\u7684\u65b9\u5f0f.\u4e8e\u662f\u6211\u7279\u5730\u53bb\u770b\u4e86 React Router \u7684\u5b98\u65b9\u6587\u6863,\u5b89\u88c5\u5b8c\u5305\u4e4b\u540e,",(0,r.kt)("del",{parentName:"p"},"\u673a\u667a\u7684"),"\u6211\u53d1\u73b0\u4e86\u4e00\u4e1d\u4e1d\u4e0d\u5bf9\u52b2,\u6211",(0,r.kt)("inlineCode",{parentName:"p"},"Switch"),"\u7ec4\u4ef6\u600e\u4e48\u6ca1\u4e86 QAQ,\u540e\u6765\u53c8\u4f7f\u7528\u4e07\u80fd\u7684 Google \u627e\u5230\u4e86 React Router V6 \u7248\u672c\u7684\u5b98\u65b9\u6587\u6863,\u8fd9\u4e0d\u770b\u4e0d\u77e5\u9053,\u4e00\u770b\u5413\u4e00\u8df3,\u8fd9\u6539\u52a8\u4e5f\u592a\u5927\u4e86.\u4e8e\u662f\u6211\u51b3\u5b9a\u91cd\u65b0\u5b66\u4e60,\u542f\u52a8\u4e86\u5f88\u4e45\u6ca1\u6709\u542f\u52a8\u8fc7\u7684 Typora.\u66f4\u65b0\u5b8c\u4e4b\u540e\u6211\u60ca\u4e86,Typora \u6536\u8d39\u4e86.......\u4e8e\u662f\u6211\u53c8\u6362\u4e86\u73b0\u5728\u7528\u7684 Obsidian \u6765\u8bb0\u7b14\u8bb0,\u540e\u7eed\u4f1a\u53e6\u5916\u5199\u4e00\u7bc7\u6587\u7ae0\u6765\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u6b3e\u65f6\u9ae6\u7684 markdown \u7f16\u8f91\u5668."),(0,r.kt)("h2",{id:"getting-start"},"Getting Start"),(0,r.kt)("h3",{id:"routes--switch"},"Routes & Switch"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import React from "react";\nimport { BrowserRouter as Router, Routes } from "react-router-dom";\n\nexport default function Config() {\n  return (\n    <Router>\n      <Routes></Routes>\n    </Router>\n  );\n}\n')),(0,r.kt)("p",null,"V6x \u7684 React Router \u53bb\u9664\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"Switch"),"\u7ec4\u4ef6\u5f15\u5165\u4e86\u66f4\u7075\u6d3b\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Routes"),"\u7ec4\u4ef6\n\u5bf9\u6bd4",(0,r.kt)("inlineCode",{parentName:"p"},"Switch"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"Route"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"All ",(0,r.kt)("inlineCode",{parentName:"li"},"<Route>"),"s and ",(0,r.kt)("inlineCode",{parentName:"li"},"<Link>"),"s inside a ",(0,r.kt)("inlineCode",{parentName:"li"},"<Routes>")," are relative. This leads to leaner and more predictable code in ",(0,r.kt)("inlineCode",{parentName:"li"},"<Route path>")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"<Link to>"),(0,r.kt)("inlineCode",{parentName:"li"},"<Routes>")," \u4e2d\u7684\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"li"},"<Route>")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"<Link>")," \u90fd\u662f\u76f8\u5bf9\u7684\u3002\u8fd9\u5bfc\u81f4 ",(0,r.kt)("inlineCode",{parentName:"li"},"<Route path>")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"<Link to>")," \u4e2d\u7684\u4ee3\u7801\u66f4\u7cbe\u7b80\u3001\u66f4\u53ef\u9884\u6d4b"),(0,r.kt)("li",{parentName:"ol"},"Routes are chosen based on the best match instead of being traversed in order. This avoids bugs due to unreachable routes because they were defined later in your ",(0,r.kt)("inlineCode",{parentName:"li"},"<Switch>"),"\nRoutes \u9009\u62e9\u4f7f\u7528\u6700\u4f73\u5339\u914d\u800c\u4e0d\u662f\u987a\u5e8f\u904d\u5386,\u8fd9\u907f\u514d\u4e86\u4e00\u4e9b\u65e0\u6cd5\u5230\u8fbe\u7684\u8def\u7531\u800c\u5bfc\u81f4\u7684 bug,\u56e0\u4e3a\u4ed6\u4eec\u5728",(0,r.kt)("inlineCode",{parentName:"li"},"Switch"),"\u4e4b\u540e\u5b9a\u4e49."),(0,r.kt)("li",{parentName:"ol"},"Routes may be nested in one place instead of being spread out in different components. In small to medium sized apps, this lets you easily see all your routes at once. In large apps, you can still nest routes in bundles that you load dynamically via ",(0,r.kt)("inlineCode",{parentName:"li"},"React.lazy"),"\nRoutes \u53ef\u4ee5\u5d4c\u5957\u5728\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\uff0c\u800c\u4e0d\u662f\u5206\u6563\u5728\u4e0d\u540c\u7684\u7ec4\u4ef6\u4e2d\u3002\u5728\u4e2d\u5c0f\u578b\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u8fd9\u53ef\u4ee5\u8ba9\u4f60\u8f7b\u677e\u5730\u4e00\u6b21\u770b\u5230\u6240\u6709\u7684\u8def\u7ebf\u3002\u5728\u5927\u578b\u5e94\u7528\u4e2d\uff0c\u4f60\u4ecd\u7136\u53ef\u4ee5\u5728 bundle \u4e2d\u5d4c\u5957\u8def\u7531\uff0c\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"li"},"React.lazy"),"\u52a8\u6001\u52a0\u8f7d")),(0,r.kt)("h3",{id:"relative-routes-and-links"},"Relative Routes and Links"),(0,r.kt)("p",null,"\u5728 v5 \u4e2d\uff0c\u5fc5\u987b\u975e\u5e38\u660e\u786e\u5730\u8bf4\u660e\u5e0c\u671b\u5982\u4f55\u5d4c\u5957\u8def\u7531\u548c\u94fe\u63a5\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u60f3\u8981\u5d4c\u5957\u8def\u7531\u548c\u94fe\u63a5\uff0c\u5fc5\u987b\u4ece\u7236\u8def\u7531\u7684\u5339\u914d\u4e2d\u6784\u5efa",(0,r.kt)("inlineCode",{parentName:"p"},"<Route path>"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"<Link to>")," ",(0,r.kt)("inlineCode",{parentName:"p"},"url"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"path"),"\u5339\u914d\u3002\u53e6\u5916\uff0c\u5982\u679c\u4f60\u60f3\u5d4c\u5957\u8def\u7531\uff0c\u4f60\u5fc5\u987b\u628a\u5b83\u4eec\u653e\u5230\u5b50\u8def\u7531\u7684\u7ec4\u4ef6\u4e2d\u3002\n",(0,r.kt)("strong",{parentName:"p"},"\u8fd9\u662f\u4e00\u4e2a V5 \u7684\u793a\u4f8b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// This is a React Router v5 app\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  Link,\n  useRouteMatch,\n} from "react-router-dom";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route exact path="/">\n          <Home />\n        </Route>\n        <Route path="/users">\n          <Users />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nfunction Users() {\n  // In v5, nested routes are rendered by the child component, so\n  // you have <Switch> elements all over your app for nested UI.\n  // You build nested routes and links using match.url and match.path.\n  let match = useRouteMatch();\n\n  return (\n    <div>\n      <nav>\n        <Link to={`${match.url}/me`}>My Profile</Link>\n      </nav>\n\n      <Switch>\n        <Route path={`${match.path}/me`}>\n          <OwnUserProfile />\n        </Route>\n        <Route path={`${match.path}/:id`}>\n          <UserProfile />\n        </Route>\n      </Switch>\n    </div>\n  );\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8fd9\u662f\u4e00\u4e2a V6 \u7684\u793a\u4f8b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// This is a React Router v6 app\nimport { BrowserRouter, Routes, Route, Link } from "react-router-dom";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path="/" element={<Home />} />\n        <Route path="users/*" element={<Users />} />\n      </Routes>\n    </BrowserRouter>\n  );\n}\n\nfunction Users() {\n  return (\n    <div>\n      <nav>\n        <Link to="me">My Profile</Link>\n      </nav>\n\n      <Routes>\n        <Route path=":id" element={<UserProfile />} />\n        <Route path="me" element={<OwnUserProfile />} />\n      </Routes>\n    </div>\n  );\n}\n')),(0,r.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u5173\u4e8e v6 \u7684\u4e00\u4e9b\u91cd\u8981\u7684\u4e8b\u60c5\u8981\u6ce8\u610f:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"<Route path>")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"<Link to>")," are relative. This means that they automatically build on the parent route's path and URL so you don't have to manually interpolate ",(0,r.kt)("inlineCode",{parentName:"p"},"match.url")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"match.path"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"<Route exact>")," is gone. Instead, routes with descendant routes (defined in other components) use a trailing ",(0,r.kt)("inlineCode",{parentName:"p"},"*")," in their path to indicate they match deeply")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"You may put your routes in whatever order you wish and the router will automatically detect the best route for the current URL. This prevents bugs due to manually putting routes in the wrong order in a ",(0,r.kt)("inlineCode",{parentName:"p"},"<Switch>"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"<Route path>"),"\u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"<Link to>"),"\u7684\u94fe\u63a5\u662f\u76f8\u5bf9\u7684\u3002\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4f1a\u5728\u7236\u8def\u7531\u7684\u8def\u5f84\u548c URL \u4e0a\u81ea\u52a8\u6784\u5efa\uff0c\u6240\u4ee5\u4f60\u4e0d\u9700\u8981\u624b\u52a8\u63d2\u5165\u5339\u914d\u3002url \u6216 match.path")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"<Route exact>"),"\u5df2\u6d88\u5931\u3002\u76f8\u53cd\uff0c\u5e26\u6709\u540e\u4ee3\u8def\u7531(\u5728\u5176\u4ed6\u7ec4\u4ef6\u4e2d\u5b9a\u4e49)\u7684\u8def\u7531\u5728\u5176\u8def\u5f84\u4e2d\u4f7f\u7528\u5c3e\u968f","*","\u6765\u8868\u793a\u5b83\u4eec\u6df1\u5ea6\u5339\u914d")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u4f60\u53ef\u4ee5\u628a\u4f60\u7684\u8def\u7531\u6309\u7167\u4f60\u5e0c\u671b\u7684\u987a\u5e8f\uff0crouter \u4f1a\u81ea\u52a8\u68c0\u6d4b\u5230\u5f53\u524d URL \u7684\u6700\u4f73\u8def\u7531\u3002\u8fd9\u53ef\u4ee5\u9632\u6b62\u7531\u4e8e\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"<Switch>"),"\u4e2d\u624b\u52a8\u5c06\u8def\u7531\u6309\u9519\u8bef\u987a\u5e8f\u653e\u7f6e\u800c\u4ea7\u751f\u7684\u9519\u8bef"))),(0,r.kt)("h3",{id:"advantages-of-route-element"},"Advantages Of Route Element"),(0,r.kt)("p",null,"\u5728\u5173\u4e8e\u5347\u7ea7\u5230 v5.1 \u7684\u90e8\u5206\u4e2d\uff0c\u4f7f\u7528\u5e38\u89c4\u5143\u7d20\u800c\u4e0d\u662f\u7ec4\u4ef6\uff08\u6216\u5143\u7d20\u7c7b\u578b\uff09\u8fdb\u884c\u6e32\u67d3\u7684\u4f18\u52bf\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"// Ah, nice and simple API. And it's just like the <Suspense> API!\n// Nothing more to learn here.\n<Route path=\":userId\" element={<Profile />} />\n\n// But wait, how do I pass custom props to the <Profile>\n// element? Oh ya, it's just an element. Easy.\n<Route path=\":userId\" element={<Profile animate={true} />} />\n\n// Ok, but how do I access the router's data, like the URL params\n// or the current location?\nfunction Profile({ animate }) {\n  let params = useParams();\n  let location = useLocation();\n}\n\n// But what about components deep in the tree?\nfunction DeepComponent() {\n  // oh right, same as anywhere else\n  let navigate = useNavigate();\n}\n\n// Aaaaaaaaand we're done here.\n")),(0,r.kt)("p",null,"\u5728 v6 \u4e2d\u4f7f\u7528\u5143\u7d20 prop \u7684\u53e6\u4e00\u4e2a\u91cd\u8981\u539f\u56e0\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"<Route children>"),"\u662f\u4e3a\u5d4c\u5957\u8def\u7531\u4fdd\u7559\u7684\u3002\u8fd9\u662f v3 \u548c",(0,r.kt)("inlineCode",{parentName:"p"},"@reach/router"),"\u4e2d\u4eba\u4eec\u6700\u559c\u6b22\u7684\u529f\u80fd\u4e4b\u4e00\uff0c\u6211\u4eec\u5c06\u5728 v6 \u4e2d\u5f15\u5165\u5b83\u3002\u5c06\u524d\u9762\u793a\u4f8b\u4e2d\u7684\u4ee3\u7801\u66f4\u8fdb\u4e00\u6b65\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u6211\u4eec\u53ef\u4ee5\u5c06\u6240\u6709",(0,r.kt)("inlineCode",{parentName:"strong"},"<Route>"),"\u5143\u7d20\u63d0\u5347\u5230\u5355\u4e2a\u8def\u7531\u914d\u7f6e\u4e2d:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// This is a React Router v6 app\nimport { BrowserRouter, Routes, Route, Link, Outlet } from "react-router-dom";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path="/" element={<Home />} />\n        <Route path="users" element={<Users />}>\n          <Route path="me" element={<OwnUserProfile />} />\n          <Route path=":id" element={<UserProfile />} />\n        </Route>\n      </Routes>\n    </BrowserRouter>\n  );\n}\n\nfunction Users() {\n  return (\n    <div>\n      <nav>\n        <Link to="me">My Profile</Link>\n      </nav>\n\n      <Outlet />\n    </div>\n  );\n}\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"WC!\u725b\u903c!!!!!!!")),(0,r.kt)("p",null,"This step is optional of course, but it's really nice for small to medium sized apps that don't have thousands of routes.\n\u8bf7\u6ce8\u610f",(0,r.kt)("inlineCode",{parentName:"p"},"<Route>"),"\u5143\u7d20\u5982\u4f55\u81ea\u7136\u5730\u5d4c\u5957\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"<Routes>"),"\u5143\u7d20\u4e2d\u3002\u5d4c\u5957\u8def\u7531\u901a\u8fc7\u6dfb\u52a0\u7236\u8def\u7531\u7684\u8def\u5f84\u6765\u6784\u5efa\u5b83\u4eec\u7684\u8def\u5f84\u3002\u8fd9\u6b21\u6211\u4eec\u4e0d\u9700\u8981\u5728",(0,r.kt)("inlineCode",{parentName:"p"},'<Route path="users">'),"\u4e0a\u6dfb\u52a0\u5c3e\u968f","*","\uff0c\u56e0\u4e3a\u5f53\u8def\u7531\u5b9a\u4e49\u5728\u4e00\u4e2a\u4f4d\u7f6e\u65f6\uff0c\u8def\u7531\u5668\u5c31\u80fd\u591f\u770b\u5230\u6240\u6709\u5d4c\u5957\u7684\u8def\u7531\u3002"),(0,r.kt)("p",null,"\u53ea\u6709\u5728\u8be5\u8def\u7531\u7684\u5b50\u4ee3\u6811\u4e2d\u5b58\u5728\u53e6\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"<Routes>"),"\u65f6\uff0c\u624d\u9700\u8981\u6dfb\u52a0\u672b\u5c3e",(0,r.kt)("inlineCode",{parentName:"p"},"*"),"\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u540e\u4ee3",(0,r.kt)("inlineCode",{parentName:"p"},"<Routes>"),"\u5c06\u5339\u914d\u8def\u5f84\u540d\u7684\u5269\u4f59\u90e8\u5206(\u53c2\u89c1\u524d\u9762\u7684\u793a\u4f8b\u4e86\u89e3\u5b9e\u9645\u60c5\u51b5)\u3002"),(0,r.kt)("p",null,"\u5f53\u4f7f\u7528\u5d4c\u5957\u914d\u7f6e\u65f6\uff0c\u5e26\u6709\u5b50\u8def\u7531\u7684\u8def\u7531\u5448\u73b0\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"<Outlet>"),"\uff0c\u5f53\u6211\u4eec\u9700\u8981\u5728\u7236\u7ec4\u4ef6\u4e2d\u9650\u5236\u5b50\u8def\u7531\u65f6,\u6211\u4eec\u53ea\u9700\u8981\u5728\u5408\u9002\u7684\u5730\u65b9\u52a0\u901f",(0,r.kt)("inlineCode",{parentName:"p"},"<Outlet />"),"\u3002\u8fd9\u4f7f\u5f97\u7528\u5d4c\u5957 UI \u6e32\u67d3\u5e03\u5c40\u53d8\u5f97\u5bb9\u6613\u3002"),(0,r.kt)("h3",{id:"note-on-route-path-patterns"},"Note on ",(0,r.kt)("inlineCode",{parentName:"h3"},"<Route Path>")," Patterns"),(0,r.kt)("p",null,"React \u8def\u7531\u5668 v6 \u4f7f\u7528\u7b80\u5316\u7684\u8def\u5f84\u683c\u5f0f\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"<Route Path>"),"\u5728 v6 \u4e2d\u53ea\u652f\u6301\u4e24\u79cd\u5360\u4f4d\u7b26:dynamic:id \u6837\u5f0f\u7684\u53c2\u6570\u548c",(0,r.kt)("em",{parentName:"p"},"\u901a\u914d\u7b26\u3002"),"\u901a\u914d\u7b26\u53ea\u80fd\u5728\u8def\u5f84\u7684\u672b\u5c3e\u4f7f\u7528\uff0c\u4e0d\u80fd\u5728\u8def\u5f84\u7684\u4e2d\u95f4\u3002"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u6240\u6709\u8def\u5f84\u90fd\u662f v6 \u4e2d\u7684\u6709\u6548\u8def\u5f84:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/groups\n/groups/admin\n/users/:id\n/users/:id/messages\n/files/*\n/files/:id/*\n")),(0,r.kt)("p",null,"The following RegExp-style route paths are ",(0,r.kt)("strong",{parentName:"p"},"not valid")," in v6:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/users/:id?\n/tweets/:id(\\d+)\n/files/*/cat.jpg\n/files-*\n")),(0,r.kt)("h3",{id:"note-on-link-to-values"},"Note on Link to Values"),(0,r.kt)("p",null,"\u5728 v6 \u4e2d\uff0c\u65e0\u8bba\u5f53\u524d\u7684 URL \u662f\u4ec0\u4e48\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},'<Link to="me">'),"\u603b\u662f\u5448\u73b0\u76f8\u540c\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"<a href />"),"\u3002\n\u4f8b\u5982\uff0c\u5728",(0,r.kt)("inlineCode",{parentName:"p"},'<Route path="users">'),"\u4e2d\u5448\u73b0\u7684",(0,r.kt)("inlineCode",{parentName:"p"},'<Link to="me">'),"\u5c06\u59cb\u7ec8\u5448\u73b0\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"/users/me"),"\u7684\u94fe\u63a5\uff0c\u800c\u4e0d\u7ba1\u5f53\u524d URL \u662f\u5426\u5177\u6709\u672b\u5c3e\u659c\u6760\u3002\n\u5f53\u60a8\u60f3\u94fe\u63a5\u56de\u7236\u8def\u7531\u65f6\uff0c\u8bf7\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"<Link to>")," \u503c\u4e2d\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"..")," \uff0c\u7c7b\u4f3c\u4e8e\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"<a href> "),"\u4e2d\u6240\u505a\u7684\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'function App() {\n  return (\n    <Routes>\n      <Route path="users" element={<Users />}>\n        <Route path=":id" element={<UserProfile />} />\n      </Route>\n    </Routes>\n  );\n}\n\nfunction Users() {\n  return (\n    <div>\n      <h2>\n        {/* This links to /users - the current route */}\n        <Link to=".">Users</Link>\n      </h2>\n\n      <ul>\n        {users.map((user) => (\n          <li>\n            {/* This links to /users/:id - the child route */}\n            <Link to={user.id}>{user.name}</Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nfunction UserProfile() {\n  return (\n    <div>\n      <h2>\n        {/* This links to /users - the parent route */}\n        <Link to="..">All Users</Link>\n      </h2>\n\n      <h2>\n        {/* This links to /users/:id - the current route */}\n        <Link to=".">User Profile</Link>\n      </h2>\n\n      <h2>\n        {/* This links to /users/mj - a "sibling" route */}\n        <Link to="../mj">MJ</Link>\n      </h2>\n    </div>\n  );\n}\n')),(0,r.kt)("p",null,"\u5c06\u5f53\u524d URL \u770b\u4f5c\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u76ee\u5f55\u8def\u5f84\uff0c\u5e76\u50cf cd \u547d\u4ee4\u884c\u5b9e\u7528\u7a0b\u5e8f\u90a3\u6837",(0,r.kt)("inlineCode",{parentName:"p"},"<Link to>"),"\uff0c\u53ef\u80fd\u4f1a\u6709\u6240\u5e2e\u52a9\u3002"),(0,r.kt)("h3",{id:"use-useroutes-instead-of-react-router-config"},"Use ",(0,r.kt)("inlineCode",{parentName:"h3"},"useRoutes")," Instead of ",(0,r.kt)("inlineCode",{parentName:"h3"},"react-router-config")),(0,r.kt)("p",null,"\u7248\u672c 5 \u7684 react-router-config \u5305\u4e2d\u7684\u6240\u6709\u529f\u80fd\u90fd\u5df2\u8f6c\u79fb\u5230\u7248\u672c 6 \u7684\u6838\u5fc3\u4e2d\u3002\u5982\u679c\u60a8\u559c\u6b22/\u9700\u8981\u5c06\u8def\u7531\u5b9a\u4e49\u4e3a JavaScript \u5bf9\u8c61\u800c\u4e0d\u662f\u4f7f\u7528 React \u5143\u7d20\uff0c\u90a3\u4e48\u60a8\u4f1a\u559c\u6b22\u8fd9\u4e2a\u65b9\u6cd5\u7684\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'function App() {\n  let element = useRoutes([\n    // These are the same as the props you provide to <Route>\n    { path: "/", element: <Home /> },\n    { path: "dashboard", element: <Dashboard /> },\n    {\n      path: "invoices",\n      element: <Invoices />,\n      // Nested routes use a children property, which is also\n      // the same as <Route>\n      children: [\n        { path: ":id", element: <Invoice /> },\n        { path: "sent", element: <SentInvoices /> },\n      ],\n    },\n    // Not found routes work as you\'d expect\n    { path: "*", element: <NotFound /> },\n  ]);\n\n  // The returned element will render the entire element\n  // hierarchy with all the appropriate context it needs\n  return element;\n}\n')),(0,r.kt)("p",null,"\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5b9a\u4e49\u7684\u8def\u7531\u9075\u5faa\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"<Routes>"),"\u76f8\u540c\u7684\u8bed\u4e49\u3002\u4e8b\u5b9e\u4e0a\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"<Routes>"),"\u5b9e\u9645\u4e0a\u53ea\u662f\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"useRoutes"),"\u7684\u5305\u88c5\u5668\u3002"),(0,r.kt)("p",null,"\u6211\u4eec\u9f13\u52b1\u60a8\u5c1d\u8bd5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"<Routes>"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"useRoutes"),"\uff0c\u5e76\u81ea\u5df1\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2a\u3002\u8001\u5b9e\u8bf4\uff0c\u6211\u4eec\u90fd\u559c\u6b22\u5e76\u4f7f\u7528\u5b83\u4eec\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u60a8\u5df2\u7ecf\u7f16\u5199\u4e86\u4e00\u4e9b\u5173\u4e8e\u670d\u52a1\u5668\u7aef\u6570\u636e\u83b7\u53d6\u548c\u5448\u73b0\u7684\u903b\u8f91\uff0c\u90a3\u4e48\u6211\u4eec\u4e5f\u6709\u4e00\u4e2a\u4f4e\u7ea7\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"matchRoutes"),"\u51fd\u6570\uff0c\u7c7b\u4f3c\u4e8e\u6211\u4eec\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"response -router-config"),"\u4e2d\u4f7f\u7528\u7684\u51fd\u6570\u3002"),(0,r.kt)("h3",{id:"use-usenavigate-instead-of-usehistory"},"Use ",(0,r.kt)("inlineCode",{parentName:"h3"},"useNavigate")," Instead of ",(0,r.kt)("inlineCode",{parentName:"h3"},"useHistory")),(0,r.kt)("p",null,"React Router v6 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u5bfc\u822a API\uff0c\u5b83\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"<Link>"),"\u7684\u540c\u4e49\u8bcd\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e0e\u60ac\u7591\u5e94\u7528\u7a0b\u5e8f\u66f4\u597d\u7684\u517c\u5bb9\u6027\u3002\u6839\u636e\u60a8\u7684\u98ce\u683c\u548c\u9700\u6c42\uff0c\u6211\u4eec\u5305\u542b\u4e86\u8fd9\u4e2a API \u7684\u547d\u4ee4\u5f0f\u548c\u58f0\u660e\u5f0f\u7248\u672c\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u597d\u50cf React Navigation \u7684",(0,r.kt)("inlineCode",{parentName:"p"},"useNavigation"),"\u554a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// This is a React Router v5 app\nimport { useHistory } from "react-router-dom";\n\nfunction App() {\n  let history = useHistory();\n  function handleClick() {\n    history.push("/home");\n  }\n  return (\n    <div>\n      <button onClick={handleClick}>go home</button>\n    </div>\n  );\n}\n')),(0,r.kt)("p",null,"\u5728 v6 \u4e2d\uff0c\u5e94\u91cd\u5199\u6b64\u5e94\u7528\u7a0b\u5e8f\u4ee5\u4f7f\u7528\u5bfc\u822a API\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fd9\u610f\u5473\u7740\u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"useHistory")," \u66f4\u6539\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"useNavigate")," \u5e76\u66f4\u6539 history.push \u6216 history.replace \u8c03\u7528\u7ad9\u70b9"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// This is a React Router v6 app\nimport { useNavigate } from "react-router-dom";\n\nfunction App() {\n  let navigate = useNavigate();\n  function handleClick() {\n    navigate("/home");\n  }\n  return (\n    <div>\n      <button onClick={handleClick}>go home</button>\n    </div>\n  );\n}\n')),(0,r.kt)("p",null,"\u5982\u679c\u4f60\u9700\u8981\u66ff\u6362\u5f53\u524d\u4f4d\u7f6e\uff0c\u800c\u4e0d\u662f\u5c06\u4e00\u4e2a\u65b0\u4f4d\u7f6e\u63a8\u5165\u5386\u53f2\u5806\u6808\uff0c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"navigate(to, { replace: true })"),"\u3002\u5982\u679c\u9700\u8981\u72b6\u6001\uff0c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"navigate(to, { state })"),"\u3002\u60a8\u53ef\u4ee5\u5c06\u5bfc\u822a\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u89c6\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"<Link to>"),"\uff0c\u5c06\u5176\u4ed6\u53c2\u6570\u89c6\u4e3a replace \u548c state props\u3002\n\u5982\u679c\u60a8\u66f4\u559c\u6b22\u4f7f\u7528\u58f0\u660e\u6027 API \u8fdb\u884c\u5bfc\u822a(\u6bd4\u5982 v5 \u7684 Redirect \u7ec4\u4ef6)\uff0cv6 \u63d0\u4f9b\u4e86 navigation \u7ec4\u4ef6\u3002\u4f7f\u7528\u5b83:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'import { Navigate } from "react-router-dom";\n\nfunction App() {\n  return <Navigate to="/home" replace state={state} />;\n}\n')),(0,r.kt)("p",null,"If you're currently using ",(0,r.kt)("inlineCode",{parentName:"p"},"go"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"goBack")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"goForward")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"useHistory")," to navigate backwards and forwards, you should also replace these with ",(0,r.kt)("inlineCode",{parentName:"p"},"navigate")," with a numerical argument indicating where to move the pointer in the history stack. For example, here is some code using v5's ",(0,r.kt)("inlineCode",{parentName:"p"},"useHistory")," hook:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// This is a React Router v5 app\nimport { useHistory } from "react-router-dom";\n\nfunction App() {\n  const { go, goBack, goForward } = useHistory();\n\n  return (\n    <>\n      <button onClick={() => go(-2)}>Go 2 pages back</button>\n      <button onClick={goBack}>Go back</button>\n      <button onClick={goForward}>Go forward</button>\n      <button onClick={() => go(2)}>Go 2 pages forward</button>\n    </>\n  );\n}\n')),(0,r.kt)("p",null,"Here is the equivalent app with v6:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'// This is a React Router v6 app\nimport { useNavigate } from "react-router-dom";\n\nfunction App() {\n  const navigate = useNavigate();\n\n  return (\n    <>\n      <button onClick={() => navigate(-2)}>Go 2 pages back</button>\n      <button onClick={() => navigate(-1)}>Go back</button>\n      <button onClick={() => navigate(1)}>Go forward</button>\n      <button onClick={() => navigate(2)}>Go 2 pages forward</button>\n    </>\n  );\n}\n')),(0,r.kt)("h3",{id:"replace-useroutematch-with-usematch"},"Replace ",(0,r.kt)("inlineCode",{parentName:"h3"},"useRouteMatch")," with ",(0,r.kt)("inlineCode",{parentName:"h3"},"useMatch")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useMatch")," is very similar to v5's ",(0,r.kt)("inlineCode",{parentName:"p"},"useRouteMatch"),", with a few key differences:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528 ",(0,r.kt)("a",{parentName:"li",href:"https://reactrouter.com/docs/en/v6/upgrading/v5#note-on-route-path-patterns"},"\u65b0\u7684\u8def\u5f84\u5339\u914d\u7b97\u6cd5")),(0,r.kt)("li",{parentName:"ol"},"\u73b0\u5728\u9700\u8981\u6a21\u5f0f\u53c2\u6570"),(0,r.kt)("li",{parentName:"ol"},"When passing a pattern as an object, some of the options have been renamed to better align with other APIs in v6",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useRouteMatch({ strict })")," is now ",(0,r.kt)("inlineCode",{parentName:"li"},"useMatch({ end })")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useRouteMatch({ sensitive })")," is now ",(0,r.kt)("inlineCode",{parentName:"li"},"useMatch({ caseSensitive })")))),(0,r.kt)("li",{parentName:"ol"},"\u5b83\u8fd4\u56de\u4e00\u4e2a\u5177\u6709\u4e0d\u540c\u5f62\u72b6\u7684\u5339\u914d\u5bf9\u8c61")),(0,r.kt)("h2",{id:"end"},"END"),(0,r.kt)("p",null,"\u4ee5\u4e0a\u662f\u6839\u636e V6 \u7248\u672c\u6587\u6863\u4e2d\u548c V5 \u5bf9\u6bd4\u7684\u4e0d\u540c\u70b9,\u5176\u4e2d\u51e0\u4e2a\u6211\u81ea\u5df1\u4e0d\u5e38\u7528\u7684\u6ca1\u6709\u6574\u7406\u8fdb\u6765,\u53ef\u4ee5\u81ea\u884c\u53bb",(0,r.kt)("a",{parentName:"p",href:"https://reactrouter.com/docs/en/v6/upgrading/v5#upgrading-from-v5"},"\u8fd9\u4e2a\u94fe\u63a5\u67e5\u770b")))}d.isMDXComponent=!0}}]);